# Copyright 2023 UMH Systems GmbH
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
{{if and .Values._000_commonConfig.infrastructure.mqtt.enabled .Values._000_commonConfig.infrastructure.kafka.enabled}}

kind: Secret
apiVersion: v1
metadata:
  name: {{include "united-manufacturing-hub.fullname" .}}-sensorconnect-mqtt-secrets
  labels:
    {{- include "united-manufacturing-hub.labels.common" . | nindent 4}}
    {{- include "united-manufacturing-hub.labels.mqttkafkabridge" . | nindent 4}}
type: Opaque
data:
  ca.crt: |
    {{.Values._000_commonConfig.infrastructure.mqtt.tls.caCert | nindent 4}}
  tls.crt: |
    {{- $tlscrt := default .Values._000_commonConfig.infrastructure.mqtt.tls.sensorconnect.cert | nindent 4}}
    {{- if eq $tlscrt "" }}
    LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZFVENDQXZtZ0F3SUJBZ0lVUXMwcURxUldDczk3L3BrQ3hHOENQUXpRTHZ3d0RRWUpLb1pJaHZjTkFRRUwKQlFBd0dERVdNQlFHQTFVRUF3d05jMlZ1YzI5eVkyOXVibVZqZERBZUZ3MHlNekE1TVRreE5EQTBNak5hRncweQpOREE1TVRneE5EQTBNak5hTUJneEZqQVVCZ05WQkFNTURYTmxibk52Y21OdmJtNWxZM1F3Z2dJaU1BMEdDU3FHClNJYjNEUUVCQVFVQUE0SUNEd0F3Z2dJS0FvSUNBUUROUi9hZHBzRUtnWDhFZmpydW44SGd4QjFweStHR3FWQysKY0Foam1FTjhXeGM0NllXNGdjZzAvQXJHbzVKNmw5cmxxdjJvb1RleHk3Zm0zTHB2TlBrOFhKVTdNUnpHYjNwUwpMWXhaaDFRdHpiM3A0YjVlNHlpYXlEVE1Qd0pIUnhWdE9ETng5Y3RRcHArZjFid3BGTzBMZzFxb0Z6N09BcFhlCmZwVGFyd0JJY2szYWtkMmhvWGVlSGNMUHh6aTE0QjNIclA0M0FTZzN1QzRyMEkxaWt2MkJuSnIzR3dpZnB4a1cKaWRabTFCVFEvMTFaSWRGTGtHSzRPcFZhZU5pZ1NVRi9Fb2xRUm9kNkR5Tytma2tMSjlvTlRxMXUrSXNHSXVJVQpCQkl2LzR3bVpyMU92TUVJRDlMTnA3OHJqdnY5TWx2VVRsZk5ZZE1DVEdac1Q5dnZOQzB1Y3QvVi93OTBUMCt5CkdRRnNSd3ZxQTZDZTlVY2JiODZXeTk2V0JwSVRQWXFmeDg5SUZoZks0c1hYSUU3QjJWM3FES3RRaTRVejdHK08KNFRvcUVkQ1J5MHJvVmpJVWVVK013MHRybHNsUWJvZTB4WHRHNUFIQXptV29TNUNuUVNJeVFDZy9KS3psZUdZdgo1d0VSTmNRbHZwaTZvUmRYeGNYT2Qwc1F4UTdCRk9aaG5KWEdEN0RwTmVWa2hKUWQySHM5UFVwajF4MjdsMDJDCmU4cHd0SU43SjgyVlpjRVhRcGk0WnJ0NnJwYzJRMXYxYUNabUY1RGdGMkZFNFRHdklMcDVRRzRMbmNpVDA1NE4KU3l1SWd5TkUxRm9XOU5CL2xwWTNzU2JGeVJxM2ltbFQ2UkZZVVRjc3IyV3NOVy9wK0x1N3ZydUpGNWJ6N3NPRQo2Qytyb1ltUkVRSURBUUFCbzFNd1VUQWRCZ05WSFE0RUZnUVVLaG9lTmhNZVZLMk12cmRUaGpzZlhjTGdFcjB3Ckh3WURWUjBqQkJnd0ZvQVVLaG9lTmhNZVZLMk12cmRUaGpzZlhjTGdFcjB3RHdZRFZSMFRBUUgvQkFVd0F3RUIKL3pBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQWdFQVNTS2F3WUtvNUlIekdXZUFnTFBHZmxMM1VEVXFLbWlqandtOAorTHM3YjRvQzk2RFBaOGJFTEZLTVc3d0hxOGhlT0QweUJLNkRYS0hrZ1pkZ2xQUDczUU05UXNERDQvY3lvRXhxCmxXUkU2OGkxZXZ3RExTVFI1aDJEZWpUUG5wZC81T3Zkb3J6WmgvOXJiQkt0ejdsb1ZETjRheEdOT2hsWWU5OGwKekpwbkg5UlR5TW8wVmNCQmpyMWlVUVRWMVhKV1FEMkUyOExRV1N4b2UxRTQxREN1NnpKMFNkbDJxOE1MM1c2cAo5dzBVQW4vS0owQTduSjdPVDhNd0RPeGp5amRIcEl1eFFQVVZnUUNGSGdEK2lWSnN0aWwrcDRidlZoT3ZBamh4CnlMYUdSd3pRZmx0aWgxaHUwVHNJUzlhU3ptbUZZYy96ZG81c3ZobzZVU2lSdmNtbXBGazVyVnRRYURpNUF0am8KcWhSYy9ZRVJkeDZmKzl5UFhrRHpuUC9admc0QndFcE9zb01ydE1RVnoyc2VnSnVWeDVtQnEycnN0Znk1U05SeApxWVI4ekJPUHB0YjhiU3JlajVHT0daUUdwSzJzUE1ZaVE4NWxjVXUzZ1MyZitFOW91d081eDd2LzNFY3Y4Q0JnCnZRMWZnV0QyaVV1RzdiUGhBK3F6M0o1Q0RRQkhWZ2pCTVE1Wk94VTRSNnlyK2swTk96MXVObWRLVGF3SXRvQzAKMkdtaXJtUFZOdFY0cjhWd1J4MGhIR0JGQWNnRzEySC9IZEVLVXVvRHFINEpGeHZsRXJxY1FMTlgyanI1OVM5NApiTmZUTnh5MDZTZFpncFdYcTZBYzE1NEdiRUpsZDJmVE9YSDVZWlJ6SVEvZFJIVENzR20rQk9kU2RFTEMvTkNsCkpYR0dJZGs9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    {{- else }}
    {{- print $tlscrt }}
    {{- end }}
  tls.key: |
    {{- $tlskey := default .Values._000_commonConfig.infrastructure.mqtt.tls.sensorconnect.key | nindent 4}}
    {{- if eq $tlskey "" }}
    LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUpRUUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQ1Nzd2dna25BZ0VBQW9JQ0FRRE5SL2FkcHNFS2dYOEUKZmpydW44SGd4QjFweStHR3FWQytjQWhqbUVOOFd4YzQ2WVc0Z2NnMC9BckdvNUo2bDlybHF2Mm9vVGV4eTdmbQozTHB2TlBrOFhKVTdNUnpHYjNwU0xZeFpoMVF0emIzcDRiNWU0eWlheURUTVB3SkhSeFZ0T0ROeDljdFFwcCtmCjFid3BGTzBMZzFxb0Z6N09BcFhlZnBUYXJ3QkljazNha2QyaG9YZWVIY0xQeHppMTRCM0hyUDQzQVNnM3VDNHIKMEkxaWt2MkJuSnIzR3dpZnB4a1dpZFptMUJUUS8xMVpJZEZMa0dLNE9wVmFlTmlnU1VGL0VvbFFSb2Q2RHlPKwpma2tMSjlvTlRxMXUrSXNHSXVJVUJCSXYvNHdtWnIxT3ZNRUlEOUxOcDc4cmp2djlNbHZVVGxmTllkTUNUR1pzClQ5dnZOQzB1Y3QvVi93OTBUMCt5R1FGc1J3dnFBNkNlOVVjYmI4Nld5OTZXQnBJVFBZcWZ4ODlJRmhmSzRzWFgKSUU3QjJWM3FES3RRaTRVejdHK080VG9xRWRDUnkwcm9WaklVZVUrTXcwdHJsc2xRYm9lMHhYdEc1QUhBem1XbwpTNUNuUVNJeVFDZy9KS3psZUdZdjV3RVJOY1FsdnBpNm9SZFh4Y1hPZDBzUXhRN0JGT1pobkpYR0Q3RHBOZVZrCmhKUWQySHM5UFVwajF4MjdsMDJDZThwd3RJTjdKODJWWmNFWFFwaTRacnQ2cnBjMlExdjFhQ1ptRjVEZ0YyRkUKNFRHdklMcDVRRzRMbmNpVDA1NE5TeXVJZ3lORTFGb1c5TkIvbHBZM3NTYkZ5UnEzaW1sVDZSRllVVGNzcjJXcwpOVy9wK0x1N3ZydUpGNWJ6N3NPRTZDK3JvWW1SRVFJREFRQUJBb0lDQURDay92RzQxRUhURWZCVW9VNXVtUmpVCklFd3p2Z3VWRDhjdzhTdjRwdlZPK0ovSjVxQWtVUGNOU3RoclpvaWFkNHE1REVicmZURXFuemViMHFvTG1Zd08KUEdhOGFwOHpSMzgxdis1dlBTbGxlYjEwZXhJdExqQVBoVU5wSXZjVkJ5VE1qcFJRdEk4MkRObHBZcDh4a0VLTQpLKzF0SkxyWXJmNzlhL1N1UjVqalRVT2dFUzc5L2tSL3RPeGJ2enFLRTBSLzMvWFUxbHp0empNZnhvRTNaODlRCjl2L2JiaDIzRVNEZ0pPaFZGV0c1UWJ1ZlllTlFJYlNhWFU0RkdRQlNtNnlyRGRMeUE2U085ZDlzT1k3bE1LeTYKbWlxVHh3MzdNaXVnRTFkQWJVdWtTUFBoa3JTQVcyblVlRjZ3RVZLY25sb2UvbnR5MVBmVWR1anZ1NlJoYnRzSQpRRE5PaFhqSHJ1YzNhdG0rZUJ0cFJ1V1ZUZ3YyOWlBd2dOdGVGaUlXZldMQkFJellrT2dUMzczczdZdWFoSk4vCnFKanZxNklvT0NaWTZJUHRFVlM5dXhWd1hPKzhjck1NbmcyLzNsNzZhOXFQM3o4Njl4VjRoRlg1S0pUY3l1bGgKc054Tm5qTVpYczJ1RG9qUmhodTJlYzE4dXBMM0ZvZmxIYmRKOVErbE56UjdHaytCME0wMWl5RHRvL1Z5MWgzYgpRR3ZRZTkvTkRmbmtlOGVlM3MrNWozcG9VbmRUcit4QXVrUU5pQ3F3eVJZUTZvT3B3eHovbFR5aWVvU2pXaE9FCmlGa01Hd0JKVjdOaGQ1SlE3bExuNzFpQnlaNSthZXBmcHAzdVFCTmZlNUFET0lJQ1dSaWNEQXBtWFlpQXNQNUoKRHgxMFNoVUFHZmFaVWlxMGZDZnBBb0lCQVFEcEtNejRQbFBieWZZb0RXYTJXUWNLNlVueW94bDVwKytTU0ZVYgpBMHhXVVphSmtQRnJFeEtEOERyWlkrSHl4NUVEOFhyeDFhYVJZbU1UYnpoYnRyMU41YWNIeXp5S0l5RTBvUGJICm5HSEtralMrTldlTGFaUlVEMElzUjBBVkt5M1F3MHJuUW1ySW1GVFRFTHBZV1hPN014ZjFlSlY2SjY4V1BOTUwKVzQzdmdUTkR1ZjMramVSYlU3TjhTU0djazZ0c1lWZEhZVEhXSWFITzA0K3VvRkRQLytjdnAzQUtWTmo2WUh2ZwphN0t0WU5FTlVmOUtEaVNFQm4vUWR1c1lZUW01bC90d3ptejFTZXZKNjMxbmkxWXJ3Q2dLV0FLK1dGUkFSVU5PCk1PakllQWxNZ2ZnQlh1eTBqeFdDTXNpei8xcUVzZC83cCtIOEZHTTZxVElTTy9xZkFvSUJBUURoWkFjcklxTGoKYkNzMFZ2RGZURXB2eXdoMFNmdWRibkNGR2JOdjNrdEM0ajRlUGh3Nnc5UGk0RU0zM0JBaDdYTTllVTRwV2xUaQpGY3lzSnBVcy8xT1pRYnFTeGFpN3pTNjk1RFlCYzA1TlJXNnhCOWN6Q2NhY3FTeXpFenhLUkVKd1dMQ2RIWFFBClVJN3dodlV0cmY4ZDZXREIrTVNUWmZZSzRlekNvUEViRCtXTU5kZGN1bldJeE5GY25KQnljUWxldkd6WTduc0oKQzltRGo3Z1F3b1JPeUlGSFZBdk4wb2M0MFRVVEl1ZlR4SC9QS25DT2o2VFEzcXhIRzhZRFN4enVRcXNOMGpoMwp6QVp6bGVXVTEwUndNQ25IWStDMG9RdG41YXV0S0RrZS96N1VNOFVFTW1jZ3BHK3hHTkZBR0hvL3Q5dCtwaWZXCkJNV2tTQkN0S0laUEFvSUJBRjJLdmZrV1lHUjhlV0tHUmVBQWhiL042cG9LNzJ5TWdLUXFtdUpVaDJyV0h0UWcKTDRzcXdySG1UbVhyR2JwaWNINnBnZzdHRGFha1YyVnpxS083QStYZHJnNkZia3RwWHFnVHNBNVRZalI0UmVyTgoyRFhwYk5Yd3JUYkFleWhEQTRXTzVGMDFtMHZST2E3WU5qcTk0SjJKR1NLbGR5cmtBdTJrQjNPMkRwSzVQZ3o4CjhMY1F6RDRMcmFXK1hWckpMK3d5Zldhb3l1ckM0WHp1Q2VZZ2NXdVJtbm5XN2k5bTdRbytiVlNUUU1Nb1paYTMKZi9tQkJRdG01QjZKcHpaSHNEUWlrb0VtZ0RaRXF2RitwZmhGd1pPWjZ6YURLczZjOTJnMW9aUWNNVGhFV0U2MgprZjVTekJxQWtUdUVEbHVRcGdzNHBjajhDTUV1bU1UdkhxU01KYmNDZ2dFQUIyTWo2UUlGbkxhYTQraEZsTXdIClZJcXZDRUMwZ29Cd0o2eWorUEtzUE5EMWdFQkE1Snd1Z2EwZ0J1Q3JsckVWcWRvaithOEFRVGk5c0piREpPcHAKYndoOGVQc0pnTDVFM2V4dzZMTkN5YjJRMXpTT2xSbW83TkdPcVgvajVmcyt3amZsOGdCWklQbUM5ZGMyaWZ5OQo4OWtHVnRVMGZEQkhWQ3Y3ZXBXVDBYTS83c3lFOW9FV0FSbVNVeHEra1VHck1QTzBEWmdqYURSL09KU3BUOE5RCld0U3ZpQXIxS0JYU1lNWmFtdm4xNXpiMWlYQzJwN1dGaldMKytvV3FnOGtlZGFDeHdvNDFVNWZZVGttSGNNMXQKYk0vblRxV3pZN2d6aTRBM2xFRlJQZmJYdEZUT0RFa3FvQ05EbGVaZVZWOTRBa2FnWnhKREUveXNEYXBmQVkzbQplUUtDQVFBeUc1K2hkcTdDK0VydFk2RXRhSEJnUWdtN0prcWhzdU9aQzNiTTQ0TGkxNkgzUnNhWjZkczh6OE5lCktyZFN5bGFqTFRUOFZPQmRBclJZRHJjeWhibmQ3d0Q5K2hVZUVoRGF4SEh0dnpQSVV1dVRiWDNKQk1PUDRtWXAKVlFNVmVZREtKejRIS2t2TnBUYmY4TlRHM29nVGhuWkVuZFh6OWNWZFZqZ2kwYkJlN2gyUk9yY0oxMHVVQkZFcQptcEFkR29GK3pIZEtITmhhdUYyVFQvdXEyZU9hYTArVUlxaFREVlpxRndOZ3RxZTllLzB2NUhjK1pRd1lpMXVwCnlWajBSdEpMWmI3U1p6VzFUMit3UitiS1N2bUpXSlN3MWN4QVZNQ1dXTVl2dmVzT2NZQW0rV3I0cXBIWHl0RmQKS3hvdWs2QWJ2bEo0K2hvSFVzZ21rdzBZdU81OQotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tCg==
    {{- else }}
    {{- print $tlskey }}
    {{- end }}

{{end}}
