# Copyright 2023 UMH Systems GmbH
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
{{if and .Values._000_commonConfig.infrastructure.mqtt.enabled .Values._000_commonConfig.infrastructure.kafka.enabled}}

kind: Secret
apiVersion: v1
metadata:
  name: {{include "united-manufacturing-hub.fullname" .}}-mqttkafkabridge-mqtt-secrets
  labels:
    {{- include "united-manufacturing-hub.labels.common" . | nindent 4}}
    {{- include "united-manufacturing-hub.labels.mqttkafkabridge" . | nindent 4}}
type: Opaque
data:
  ca.crt: |
    {{- $ca := default .Values._000_commonConfig.infrastructure.mqtt.tls.caCert | nindent 4}}
    {{- if eq $ca "" }}
    LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tDQpNSUlGSkRDQ0F3eWdBd0lCQWdJRUNtMFVRekFOQmdrcWhraUc5dzBCQVF3RkFEQTZNVGd3TmdZRFZRUURFeTkxDQpibWwwWldRdGJXRnVkV1poWTNSMWNtbHVaeTFvZFdJdGFHbDJaVzF4WTJVdGJHOWpZV3d0YzJWeWRtbGpaVEFlDQpGdzB5TWpFeE1qZ3dPVEF5TlROYUZ3MHpNakV3TURZd09UQXlOVE5hTURveE9EQTJCZ05WQkFNVEwzVnVhWFJsDQpaQzF0WVc1MVptRmpkSFZ5YVc1bkxXaDFZaTFvYVhabGJYRmpaUzFzYjJOaGJDMXpaWEoyYVdObE1JSUNJakFODQpCZ2txaGtpRzl3MEJBUUVGQUFPQ0FnOEFNSUlDQ2dLQ0FnRUEzTXpSTnZuZ0lMM2ZIU3IxK1NaWGp6NjZjdGtQDQpESi9KOU9BK01abzBSeUpVVVVOcUdSRFo4Vk13UjN3ZE0yY1c4M25oZVkxU2JNaWJvMGx0TmZkZ1JwNDlqeGdTDQpPbzNXWjlPeC9qS2ZkOHE4M0tRVU1QR2wyNzE2REVWSXNVaVZ1SjloRisyZlp4VHlnLzB1eHR1TVQ2ZDE2ZXgwDQpEalBxTHlBZFZhcTJjdGJtWWs2Rkt1T2lWQkJsSWRkSzdGY1J0SE0wU09ONEcxNUcrR2o0bmVRYWhlc1F2cHNGDQpjKzNEQ3huYi8yUFR3U1ZGR2JOQ0c4ZkJhL3hTdjlDdUpxQmRPWStPYzRIR2xkT0cxenRWeUtMWW1JakpyYVJhDQo0Q29WTm1hQ2FIenUwVmsxb2RmVU83eXdRTjU0aS9nVlM0THVNbkRPaFFwOEdwV3BsZFdHc2hvNWdCaWs5UDVPDQptS0ZHK1UwSlp5aVpPRDF0QTQwOFlmUjl2YlJXc0Y1bC93bStQMElvVStQSVJPbWJVNHJzT3dER2cxSHg2U2NEDQo3TzR1UXRUZjhOQUMyR3ovV3JScmFkV0JQaW9QbkZhU29vT1Qva2xxVWhPKzJmNzZXakNNUlVqajd3cUlpOVJYDQpvNWtiTGJ5T2RpWFFxS1JTUW1TOFJpUTBuN1pVSG5OZjNRT2dCNzhGWmpxV2NFUG5LZHVDUlF6VmlHUG53Q0VlDQp6aXJFY3VxTllsaEkrMTF6RmdJL0RHUDJEVmsxem11TmxOT09uaU1HS2poSGR2dkR4QkZJakRsYWtYYUx0SENBDQowNVE1aThsb0F2dTgrc1pXVHJtL3NDRnBnWTV4R09VS3o3bDhxMG9vRVErUjlGclN0Tk15U0JyKytONnQvUktIDQpsdy9kYit0K1FKcjA5RThDQXdFQUFhTXlNREF3SFFZRFZSME9CQllFRlBkU29jZWFSaEpwOXNTOHhYOHJHWElTDQpVdzlmTUE4R0ExVWRFUVFJTUFhSEJIOEFBQUV3RFFZSktvWklodmNOQVFFTUJRQURnZ0lCQU5yMGloZDU0amxMDQpCTUo4S1NOQi9VdTJ2TUxuWlEyRzVOdENzMENwellnenZTOCsySFE0ZXlEeHF2aXJmVlQ1TGYxZnZ0OGVDVXR4DQpxbGdHdHZFVkN1TmVhbk1PdE9IZDFobVZISTNIMGQ2MXdheWtJNWpzZmlVYVVucmxkU1hIS2pOdUUrUjNEYmFnDQpLNVgrUnRpWlcvWUl3QU9sSzgzaTdUVEpqakhIc3o2S1BlbUUxdU8rb2hyOEtCTjgvbmJUdGIzb3RkTC84RmRCDQo3RlpQNmxFOG9BU0RGSm4rVFVQRUYwZkJ3Wnd1bDd1Mm1UV09hMEZWLzJyb3QvQytZam5CWUNEbEdCRlM4VDk0DQpLMG9EUFBMWXpwYjdLQW9QampCM1h3QXhDajJOV0tQYzhMam5YTVBZcm9KQmovMGFQTVNBNG5WVWt5am5MVjBoDQpXTXFZcHF2VTUyTGZhdHlMOFhIaVhERXA5TFVBMmxZNndaN2tRSjEycXVDNWx6aVA4Q0JJNkI3Tmt5MzlHYkFrDQo4bmI3bVJzUHQ1ZjFwWnJ3eEEra2svS0R5QWkzQ2l3L0NtL0oyOXBTVmErRnRrVkFsSzVSZkszdHc5eVg5MXlWDQpIcGc3VzlNZngwZVBKRzBObXFNQVJEbGlHMjdHY21vcDhMWHVaNms2N3RnNjNsNXR0V2FWd2JCLzhqR2szQXk3DQo3UTNoRDhtZEoxdlNLZm5ITDhpdW05U3VRZzdmR0Z1a3BldzViN281ZERhdGJmdEVLVEM4OVdUYmpHcDliWldSDQo1dkJIdzhrbjB5ampkSUdQMUFUeW05aUZIL3VSY3VrR3Z4bmc4UmZRZkVubmJ6MWF0S05wN3JMbFE5ZjdJOERyDQovUVgwVHVxbGJQdHdaKzdHQXc2amV0MGxzQnd5M0d2Kw0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQ0K
    {{- else }}
    {{- print $ca }}
    {{- end }}
  tls.crt: |
    {{- $kafkabridgecrt := default .Values._000_commonConfig.infrastructure.mqtt.tls.mqtt_kafka_bridge.cert | nindent 4}}
    {{- if eq $kafkabridgecrt "" }}
    LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZHVENDQXdHZ0F3SUJBZ0lVSGN1MFFwNnZIa1I1bkg2b2xZRUl4aTRPV0VZd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0hERWFNQmdHQTFVRUF3d1JiWEYwZEY5cllXWnJZVjlpY21sa1oyVXdIaGNOTWpNd09URTVNVFF3TkRFMwpXaGNOTWpRd09URTRNVFF3TkRFM1dqQWNNUm93R0FZRFZRUUREQkZ0Y1hSMFgydGhabXRoWDJKeWFXUm5aVENDCkFpSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnSVBBRENDQWdvQ2dnSUJBSkNvajl0Y3JyaDZxRVJjelFuWjF3d2oKZ2ZwTnNSSmVCd0lveU5QeWRQQzF6OC82QVJrK1Q3bzNwMmY5LzdyMkJNenh0YUZxcHpPWW1vRExVaGZ5bXhOKwovM3Z0azZNeEkvR0twMUtoQXQ3RThHVGkxUkU1ZFM4K1RRLzBaUHE2MzZtYVZmaGNrdGRwK1Y2MmRuOUZ1TEUxCk5vNjlLRkl5Um9tVVhZZG5YcVZtTVl5OGg1b2VIQVZwWS9SOGRKeXU1QXJDOWhxbnJwcVJST2tuMFpPNnJoYUkKNWliNW1WMkRVTDRwZ0wwbTZRZFJCZlRvZEpaanhDUVA4SkRkSEFFNUJWM2FPNENzbk9jR3ovYjU4VWJ1T0JuSgpabExGcUZCRzV2ZEFlMDZiYU10SnkyV2J6blc0Y3diNHNxODZvRmxLZWxXVVBTSG5XSHhJQnhmcXQzZ2phSlJDCmdIMUdVRkNLZUhIMUlQRFBqTHg2SVMxNnZOampJdnlwbU5UNmRiNUVLZU9aRmU3VVFRZVpqR3VFZG9lRC9INlkKUm1TenV0NUtCT0dTbVJ4eE52UmxDbWpYVXBMbE9ZdkpBUnYrdmdMSDVJaVJCR3BJeUpVeDNiUHQ2OSszWGc0LwpRWHAxbWlVZmFLN0Z1b0Y0ZVlVTkh0RTVTOUM3a2V5OGY1c2VaYnkvaG1kTmtFUE5EM085VlU2VEF5WWYwcjAzCjZjMy9WV01RbVFNblllSUk0OTQ4KzBZV3IwNUxRQnE5eWsyZnU1OGtRNEVYank2eS90SkR6SSsrYWdaRUdVbzQKUnJuN29ENzhBNlEvdWxoaXdZUDVacExENFRUd2lSTE03VjBqaEZQWUhsWXNXL3VDa1MxOGRWK1BzWjZiYUREZApvTnJtUVBveFV2YWZYbWNaRnJEOUFnTUJBQUdqVXpCUk1CMEdBMVVkRGdRV0JCUks3UnlreHNrV2t5T0pnMU14CitDOFFjdG5SakRBZkJnTlZIU01FR0RBV2dCUks3UnlreHNrV2t5T0pnMU14K0M4UWN0blJqREFQQmdOVkhSTUIKQWY4RUJUQURBUUgvTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFBbnZ4aXFQYWdSV25yNlBpVzR2ZEEyZDAzWgptb1hibXRXVkcvWWxvZDViMnRZcHp0WkEvTnZYbGppcGgySjZwQ3Nocm9hY3Fvd3NmOEgycFIvVWZCR0o0VS9OCnR3cVJRY0Z3M0s0SkNoVS9aNXlFNUh4SDFydmRwZkhFSmhNSTRIRE85bTFDMjFPcEtNcHUxZ2JQRUpOUkJxU20KdzhYRXM1T3hMZ3dzSFJQVmF3NTNJenAyb3haR1dOenJuT0xqOVdrczZZRThWbFhOWkFxQWEvaVBTZjdQTW1nZApQQXFFTXUvR2pmWi9OSFBiT2hiRmdhemw0bXhEZEliV1p6dkpZZW10anEzNWNaMXhWeDNPdjVnV0YzTEcrSG0vCjFlQ0RtUVFpYmczUGoyclRHOC8yRXNrY1hPUWorU3V5NnlCa3FWM3ZXS1dmbUdyTmIxaUM4cUg5Y2VqM1RhRmUKYWt6Y3NkZFB4RVpiUERZR2M4WDRjUFRsNVBSeHk1akp1cUE1eVZsQTJvQlcyN0RxZ1VhOFFvbkhwc2dMSlZhNgpxd0lyMFZtdnpFempsMUpIdlZrdTB3aDdLNjVaM3VnTlBXODVCaDNrRDlOT3dyWU9teDU5aWM2YTZkRlBpQ0toCmRhcEY2NjRQQmZBWGlhcm14a20xdFpGTzNqVVBwRzg5TU0ralpsZUFndTVOSUtJRjBwUGVWZC85dFBNTHBCTkMKNE91UlR5RVhMSnJyOUpiY05HWDc4UmFzVnFMbjdGbUZmWm93K0plcUo1MG1XbEIzOW9BcDNQbysvZE4rbytnUQpFWDVCck5RTXVLaUM0TEN0a1VycXgwa2UvcTNURE9ldmYrWGJkbVc3aks2Q3FEQTlhdWEyMDF3QnJHWEw4eXV5CmRKczNrVmpKdC9ueHRhb0hvUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    {{- else }}
    {{- print $kafkabridgecrt }}
    {{- end }}
  tls.key: |
    {{- $kafkabridgekey := default .Values._000_commonConfig.infrastructure.mqtt.tls.mqtt_kafka_bridge.key | nindent 4}}
    {{- if eq $kafkabridgekey "" }}
    LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUpRd0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQ1Mwd2dna3BBZ0VBQW9JQ0FRQ1FxSS9iWEs2NGVxaEUKWE0wSjJkY01JNEg2VGJFU1hnY0NLTWpUOG5Ud3RjL1ArZ0VaUGsrNk42ZG4vZis2OWdUTThiV2hhcWN6bUpxQQp5MUlYOHBzVGZ2OTc3Wk9qTVNQeGlxZFNvUUxleFBCazR0VVJPWFV2UGswUDlHVDZ1dCtwbWxYNFhKTFhhZmxlCnRuWi9SYml4TlRhT3ZTaFNNa2FKbEYySFoxNmxaakdNdkllYUhod0ZhV1AwZkhTY3J1UUt3dllhcDY2YWtVVHAKSjlHVHVxNFdpT1ltK1psZGcxQytLWUM5SnVrSFVRWDA2SFNXWThRa0QvQ1EzUndCT1FWZDJqdUFySnpuQnMvMgorZkZHN2pnWnlXWlN4YWhRUnViM1FIdE9tMmpMU2N0bG04NTF1SE1HK0xLdk9xQlpTbnBWbEQwaDUxaDhTQWNYCjZyZDRJMmlVUW9COVJsQlFpbmh4OVNEd3o0eThlaUV0ZXJ6WTR5TDhxWmpVK25XK1JDbmptUlh1MUVFSG1ZeHIKaEhhSGcveCttRVprczdyZVNnVGhrcGtjY1RiMFpRcG8xMUtTNVRtTHlRRWIvcjRDeCtTSWtRUnFTTWlWTWQyego3ZXZmdDE0T1AwRjZkWm9sSDJpdXhicUJlSG1GRFI3Uk9VdlF1NUhzdkgrYkhtVzh2NFpuVFpCRHpROXp2VlZPCmt3TW1IOUs5TituTi8xVmpFSmtESjJIaUNPUGVQUHRHRnE5T1MwQWF2Y3BObjd1ZkpFT0JGNDh1c3Y3U1E4eVAKdm1vR1JCbEtPRWE1KzZBKy9BT2tQN3BZWXNHRCtXYVN3K0UwOElrU3pPMWRJNFJUMkI1V0xGdjdncEV0ZkhWZgpqN0dlbTJndzNhRGE1a0Q2TVZMMm4xNW5HUmF3L1FJREFRQUJBb0lDQUNEWWJTV0pNMURHNU9yMHlVZDUwMmE1CnJ6c0dwZlIrTGdneSszcUlYRDRGZ2lSK1p2NTAxQVI3dTRLVXZScVYzcndzQzZvVmZkWnN5WFFCOW1kaW1neUEKc3dEUURrd3BEYmk3MjBjYk1Qd2s2bEoxNEp3VEdFVDhWK0lPQTFtYzBja0FOcEg0YncwRFRuQlBiTE4wUUwzWAp6OFgwTkRJSm9WTit3UWZNRkVUbzRjcExTbHpYaGxSQ1BFUllkOS9WcEFpL2dNTEhuUkVTZC91YW8yN3dIYlFYCkxHN2dFSThYa0Y5RkxDcUdxYldVRTQ2cXMwSXNiKzRpUW1TYUY5QTlRcmN2SklDUWNPWFIrYWxoMGdOaGRwS0EKVkwvcGlsQ0Q4TkJtTHpsSGR6RmxWWTRDSlF3OHI3MSsvWTlrOStDZVZRMldaWlVMb3Q5Qk9YOFlOOFZMQU9VRgprZVhXaTNTNWQzNnVpc1BNbmxyVmNNd3p1UnErMlM0UFN5TURMYmk2YmpjQ29OTzNuK2lULzQ1akdsL3NHOUZlClk5NXI3VkZja01yYnErSS85dUxKK2IyWlZwMFhtMnRoNjcxa2pWanNSOUJPMUdIQnBNWTdBdWF1ekc3bEtYYzQKWnVEeFF6dUlHMnA0aTRiZ3ZDbjErV1A1Nmd3dzVXYmhEamMyeDRMOFh6ZC9uL3MySUdXMGtiRTgvT0ZLZWJrLwo0OEhkMmlIMnlUMmhXUTJyZWJxTDBtbjM4cDAxaFRYaEJkblNBbU1ta3dOZkdGTUdrRTZWczhpY2ZHZ0pxeDBWCnlJMG1YTlZrV3hrMHVGem44cUZPeHE1WkJSelZhNEt4L2NCMXVLMUdLMzBqaWlXM25lb3UweHlHbmM0aVJPeVcKSUk0T1dSSnEvSXBTeVQ3WkltQ3hBb0lCQVFDN0ZVVTN6OHkvYWNsT2pxVllUNWFsMXl3OEJpWHdPQ3dOSUNwNgppcjdRK2Nnd3NpMDNoQXNRd3AvaHVHK2lSSHJoeUY3VG1IM0czNkVBUTJ6bG9QclFOVE9YNmZqNVJBL21QUnFzCmwzRTZwejZNUXlLVE9IQ1l5eG1XejFFS0ovSWMyS0EwaXl3SUlpRFVhb1BzMGIrK3BIMEJ2aGUzRVlkdjZFdzMKb29oWWFtVEJrMi9hcjhBYUpFeGVEZVJRMmxWUHNCdEdUTDlFb2ZhTm1DbDN3eFkrUUJ6TFc4VVJqUGRhZ2IwQQpUQU9QUnlRNTZrK29YOVdvNEpGblVndDIyVVIxeW1YU1JDNjFNS2N2UGttUG1JRk1oNGJxSWdRVlZhZjd4LzRWCnVuTlNxVWRXT2U2VUNOQlVaVFp5dU1IemRWYngxdFNmcXE2bWMyZmxPRTZsRUpmWkFvSUJBUURGOG5lMkh4WGoKZHkraFpPRXpUSGZ3QXJnQ0pJY3pYUm5PRHNXWEVmVVFuSTl6RjlzclVnMmd1WlU1NkR1K1A4dVhPcUZ2WXJTUwpXZGhuV05nTjFUaFZsMmt6bW1wejdhZ0t1bEJtd2ErMUtCV0NwZ2xhbVF4TkpuN2paK28zU25TUVZ2UnJKeW84CmNmVkhCN0Z1aDFzRkF3dzliOWFLUnE1YkE4WG1UN1AwQTFWY0UxbTBNR2xjYUpKRWl1WWJSTUsvMjFLY3dEY2YKU2FtMlUyYnRGNkRqM2tCOHUrWlVZbFdHS1BrV0VidWRzQ1NCS1h2c2xoS1psMEJOb1o0ZnYzalB0b1dBMlhVRwo2Wm9OTGloRGlNZDRaRG9PYXE0WlNyRWc2WFhPWml4Rm5rbzdXSi81M2g2S0YrNC9LS2grT29aQ0txZVl3aXNwCi8vU1ZzNWdGV1MvRkFvSUJBUUNBVEVYNzBIWUpqdktPL1NSSE84MkVUZHY0RGY5V2ppOG5rVGVRY2pZSitrSmYKb3RGL2tQNUZzRE1WQ1BjRndSREVaalVoeHlINmtNSkkrL1JpUmRPN2xjQ2NIY2l3cVF4K1NNbFNNMGxqZis1VgpJblZEb1NFV3A3SVV5bmc1RHN2ckhHUkJwRys5NUNtL2dveVdqQUdETENyT1Z4N01YU2tVaGFvL1BTZGoreEs5CjdlNTNlcSt6UGRGaGJ3VjByVVowTDhHRXBIMUhCQXVoYndpQktUakgyQS9uSmpndm9RekE5Tmc0cStpRkNiUysKUXdIOTVqc1FaWEZSK2VJQ3oxMHpxbW5KbVJpdkNYNmQxNGw3QUlzcmdJWDFhdjZCNHd3Z2p6YWdrQTBtVXhDcApBWEdyODU5clFUM2x6dTZ6bDNUWXhRdHJ0Qkd4OU5MN1QzSWZvUkdCQW9JQkFRQ3pJaFhMcnAzMFYydTNOci9GCjJMSEJkZlJubS83dU1KYWxyeUNJOGl0QWVTNG9EYks5cFdmSHg2cVAyT1lYNlV1bzg5b2NIc3NpbGtRTVlvNUQKRm00QXB5RUJIZ0N3SUtZdDd5WExtQVFXZ012V2k4TnpSWVdvVytvQWlZMmZzN1dBMmZBZStEWjB0UHd1NTN0ZQpkd2VicFlKeUpyK1VLeHFtS3VmdzRMZ05YdWJraUc1cGJsWXExa2RuMS9zZE9rQ3p0eHN2MTVNS3NYTHdHTkhRClJjM0g2TjJiQThBUkpWd1lLUVFoUUxMMHBPNmtKSktOSzlKeFJEdGhCWjAvUmR0aXZkNWJHRytiYmRPSGtmbkcKQkFYZm9YUVlqOW8xOFM0U2hyT2hzVHpuVTdRQnVOWXRIU0d0L3JJUVhnNzlES0ZyUjRhYjZ6dDhxckVBdUtJZQpWUE94QW9JQkFCemE5OUYyUFRNN1JOOUpTdUNacE5CMmNCbnpwRW1XckU1SzlxTEtYaXNDek1vWmZ5Um5FQVlhCjVBd0pOTHl1cno1bU5Kd3F3bkJzK0hvdTRvLzN0L2N0NEhLTng5UjFPaGJXT0RYS1ZIRURFUFc2VDR0U0pGSXAKV2srTEhubklIRldpY3czcWFrMlQ1QWRiTDIwODJTMStkMXQybVNFazh3bWRXeHNUeDVBbDNKMFdLNE5RVVptNApYMC9VQ05Zem5rY1RGUHB3NG1hRThOQ1FOSU9ZaVdjZU16Z1ptYW5jOHV1cWwwWDE0ekt4aTFtbDBEWENXMXozCjFDNDVxNE9ZdjhMV2tMOFJqL21NZXB2Qk1RekYwQXdwZS9HUDEwZW5pY1QzNmRPVGdySmZsdXo3Z2YvbFZ0bDUKK0pFWTFBZGtJS2JucUVGZGZRRWpucVNYSFVpTUYvST0KLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLQo=
    {{- else }}
    {{- print $kafkabridgekey }}
    {{- end }}

{{end}}
