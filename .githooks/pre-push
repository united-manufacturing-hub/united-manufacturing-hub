#!/usr/bin/env python
from functions.log import Log

import functions.libhelmlint as libhelmlint

skip_yamllint = False
try:
    import yamllint
except ImportError:
    Log.warn("Failed to import yamllint")
    Log.warn("Open https://github.com/adrienverge/yamllint to find out how to install with your package manager")
    Log.warn("Or use 'pip install --user yamllint'")
    skip_yamllint = True

if not skip_yamllint:
    import functions.libyamllint as libyamllint


if __name__ == '__main__':
    failed = False
    if not skip_yamllint:
        if libyamllint.LibYamlLint().run() != 0:
            failed = True

    if libhelmlint.LibHelmLint().run() != 0:
        failed = True

    if failed:
        exit(1)
